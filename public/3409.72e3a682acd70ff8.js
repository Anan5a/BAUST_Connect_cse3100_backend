"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[3409],{3409:(S,d,s)=>{s.r(d),s.d(d,{LoginPageModule:()=>I});var g=s(9808),r=s(4182),n=s(2159),l=s(333),c=s(655),m=s(8091),e=s(2096),h=s(7053),f=s(1188),v=s(6231);function Z(o,a){1&o&&(e.TgZ(0,"span"),e._uU(1,"This field is required"),e.qZA())}function P(o,a){1&o&&(e.TgZ(0,"span"),e._uU(1,"The input is invalid"),e.qZA())}function T(o,a){if(1&o&&(e.TgZ(0,"div",12),e.YNc(1,Z,2,0,"span",13),e.YNc(2,P,2,0,"span",13),e.qZA()),2&o){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",null==t.emailorid||null==t.emailorid.errors?null:t.emailorid.errors.required),e.xp6(1),e.Q6J("ngIf",null==t.emailorid||null==t.emailorid.errors?null:t.emailorid.errors.emailorid)}}function b(o,a){1&o&&(e.TgZ(0,"span"),e._uU(1,"Password is required"),e.qZA())}function w(o,a){1&o&&(e.TgZ(0,"span"),e._uU(1,"Password needs to be 8 characters"),e.qZA())}function L(o,a){if(1&o&&(e.TgZ(0,"div",12),e.YNc(1,b,2,0,"span",13),e.YNc(2,w,2,0,"span",13),e.qZA()),2&o){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",null==t.password||null==t.password.errors?null:t.password.errors.required),e.xp6(1),e.Q6J("ngIf",null==t.password||null==t.password.errors?null:t.password.errors.minlength)}}let p=(()=>{class o{constructor(t,i,u,x,A,_){this.fb=t,this.authService=i,this.router=u,this.storageService=x,this.events=A,this.activeRoute=_,this.credentials=new r.cw({}),this.force_disable=!1}get emailorid(){return this.credentials.get("emailorid")}get password(){return this.credentials.get("password")}ngOnInit(){const t=this.authService.isLoggedIn();if(this.router.url.match(/\/logout/)){const i=new m.D;this.authService.logout(),this.storageService.remove("userProfile").then(u=>{this.events.publishEvent({update_menu:!0}),this.events.publishEvent({update_profile:i}),this.router.navigateByUrl("/homepage",{replaceUrl:!0}),console.log("logout ok")},u=>{})}t.then(i=>{"true"===i&&this.router.navigateByUrl(this.activeRoute.snapshot.queryParams.returnTo||"/profile",{replaceUrl:!0})}),this.credentials=this.fb.group({emailorid:["",[r.kI.required,r.kI.minLength(9),r.kI.maxLength(9)]],password:["",[r.kI.required,r.kI.minLength(8)]]})}login(){return(0,c.mG)(this,void 0,void 0,function*(){this.force_disable=!0,this.authService.login(this.credentials.value).subscribe(t=>{t&&(this.storageService.set("loggedIn","true"),this.router.navigateByUrl(this.activeRoute.snapshot.queryParams.returnTo||"/profile",{replaceUrl:!0}),this.events.publishEvent({update_menu:!0}),this.events.publishEvent({update_profile:t.data}),this.storageService.set("userProfile",t.data))}),this.force_disable=!1})}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(r.qu),e.Y36(h.$),e.Y36(l.F0),e.Y36(f.V),e.Y36(v.h),e.Y36(l.gz))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-login"]],decls:30,vars:4,consts:[["color","primary"],["slot","start"],["size-lg","4","size-md","3","size-xs","12"],[1,""],["ion-text","",1,"white"],[3,"formGroup","ngSubmit"],[1,"input-group"],["formControlName","emailorid","placeholder","Student ID","type","text"],["class","errors",4,"ngIf"],["formControlName","password","placeholder","Password","type","password"],["expand","block","type","submit",3,"disabled"],["color","light"],[1,"errors"],[4,"ngIf"]],template:function(t,i){1&t&&(e.TgZ(0,"ion-header")(1,"ion-toolbar",0)(2,"ion-buttons",1),e._UZ(3,"ion-menu-button"),e.qZA(),e.TgZ(4,"ion-title"),e._uU(5,"login"),e.qZA()()(),e.TgZ(6,"ion-content")(7,"ion-grid")(8,"ion-row"),e._UZ(9,"ion-col",2),e.TgZ(10,"ion-col",3)(11,"h1",4),e._uU(12,"Login"),e.qZA(),e.TgZ(13,"p",4),e._uU(14,"Login to your account"),e.qZA(),e.TgZ(15,"form",5),e.NdJ("ngSubmit",function(){return i.login()}),e.TgZ(16,"div",6)(17,"ion-item"),e._UZ(18,"ion-input",7),e.qZA(),e.YNc(19,T,3,2,"div",8),e.TgZ(20,"ion-item"),e._UZ(21,"ion-input",9),e.qZA(),e.YNc(22,L,3,2,"div",8),e.qZA(),e.TgZ(23,"ion-button",10),e._uU(24,"Log in"),e.qZA(),e.TgZ(25,"ion-text",11),e._uU(26,"Not yet a member? Contact your department."),e.qZA(),e._UZ(27,"br"),e.TgZ(28,"ion-text",11),e._uU(29,"Forgot password? Contact your department"),e.qZA()()()()()()),2&t&&(e.xp6(15),e.Q6J("formGroup",i.credentials),e.xp6(4),e.Q6J("ngIf",((null==i.emailorid?null:i.emailorid.dirty)||(null==i.emailorid?null:i.emailorid.touched))&&(null==i.emailorid?null:i.emailorid.errors)),e.xp6(3),e.Q6J("ngIf",((null==i.password?null:i.password.dirty)||(null==i.password?null:i.password.touched))&&i.password.errors),e.xp6(1),e.Q6J("disabled",!i.credentials.valid||i.force_disable))},directives:[n.Gu,n.sr,n.Sm,n.fG,n.wd,n.W2,n.jY,n.Nd,n.wI,r._Y,r.JL,r.sg,n.Ie,n.pK,n.j9,r.JJ,r.u,g.O5,n.YG,n.yW],styles:["ion-content[_ngcontent-%COMP%]{--padding-top: 10%;--background: url(https://images.unsplash.com/photo-1536431311719-398b6704d4cc?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjEyMDd9&auto=format&fit=crop&w=1234&q=80) 0 0/100% 100% no-repeat}form[_ngcontent-%COMP%]{max-width:400px;align-items:center}.input-group[_ngcontent-%COMP%]{background:#fff;border-radius:10px;overflow:hidden;margin-bottom:15px}.errors[_ngcontent-%COMP%]{font-size:small;color:#fff;background:var(--ion-color-danger);padding-left:15px;padding-top:5px;padding-bottom:5px}.white[_ngcontent-%COMP%]{color:#fff}"]}),o})();const y=[{path:"",component:p,children:[{path:"logout",component:p}]}];let U=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[[l.Bz.forChild(y)],l.Bz]}),o})(),I=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[[g.ez,r.u5,n.Pc,U,r.UX]]}),o})()}}]);